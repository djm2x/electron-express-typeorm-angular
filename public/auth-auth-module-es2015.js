(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{Yj9t:function(e,t,r){"use strict";r.r(t),r.d(t,"AuthModule",(function(){return j}));var i=r("ofXK"),o=r("tyNb"),a=r("mrSG"),s=r("3Pt+"),n=r("V2kc"),c=r("fXoL"),m=r("7q3A"),l=r("M0ag"),d=r("0kbX"),b=r("kmnG"),u=r("qFsG"),h=r("NFeN"),p=r("bTqV");function f(e,t){1&e&&(c.Sb(0,"mat-error"),c.zc(1,"Email non valide"),c.Rb())}let g=(()=>{class e{constructor(e,t,r,i,o,a){this.fb=e,this.uow=t,this.router=r,this.session=i,this.route=o,this.snackBar=a,this.o=new n.a,this.hide=!0,this.code=""}ngOnInit(){return Object(a.a)(this,void 0,void 0,(function*(){this.o.email="admin@angular.io",this.o.password="123",this.createForm(),this.code=this.route.snapshot.paramMap.get("code"),this.code&&""!==this.code&&this.submitCodeCommingFromEmail()}))}createForm(){this.myForm=this.fb.group({email:[this.o.email,[s.r.required,s.r.email]],password:[this.o.password,[s.r.required]]})}get email(){return this.myForm.get("email")}get password(){return this.myForm.get("password")}get emailError(){return this.email.hasError("required")?"You must enter a value":this.email.hasError("email")?"Not a valid email":""}get passwordError(){return this.password.hasError("required")?"You must enter a value":""}submit(e){this.uow.accounts.login(e).subscribe(e=>{e.code<0?this.snackBar.notifyAlert(400,e.message):(this.snackBar.notifyOk(200,e.message),this.session.doSignIn(e.user,e.token),this.router.navigate(["/admin"]))})}submitCodeCommingFromEmail(){this.uow.accounts.activeAccount(this.code).subscribe(e=>{e.code<0?this.snackBar.notifyAlert(400,e.message):(this.snackBar.notifyOk(200,e.message),this.session.doSignIn(e.user,e.token),this.router.navigate(["/admin"]))})}resetForm(){this.o=new n.a,this.createForm()}ngOnDestroy(){console.log("ngOnDestroy")}}return e.\u0275fac=function(t){return new(t||e)(c.Mb(s.d),c.Mb(m.a),c.Mb(o.e),c.Mb(l.a),c.Mb(o.a),c.Mb(d.a))},e.\u0275cmp=c.Gb({type:e,selectors:[["app-login"]],decls:24,vars:5,consts:[[3,"formGroup","ngSubmit"],[1,"d-flex","flex-column","justify-content-center","align-items-center"],["src","assets/logo.png","alt","logo","width","80%",1,"mb-4"],[1,""],["appearance","fill",1,"col-md-12","p-0"],["matInput","","formControlName","email","placeholder","Email address"],[4,"ngIf"],["appearance","fill",1,"col-md-12","p-0","mb-4"],["matInput","","formControlName","password","placeholder","Mot de passe",3,"type"],["matSuffix","",3,"click"],["mat-raised-button","","color","primary","type","submit",1,"col-md-12","mb-2",3,"disabled"],[1,"d-flex","mt-2","mb-2"],["mat-stroked-button","","color","primary","type","button",2,"width","50%",3,"click"],["mat-stroked-button","","color","accent","type","button",2,"width","50%",3,"click"]],template:function(e,t){1&e&&(c.Sb(0,"form",0),c.Zb("ngSubmit",(function(){return t.submit(t.myForm.value)})),c.Sb(1,"div",1),c.Nb(2,"img",2),c.Sb(3,"h1"),c.zc(4,"Bienvenue"),c.Rb(),c.Sb(5,"div",3),c.Sb(6,"mat-form-field",4),c.Sb(7,"mat-label"),c.zc(8,"Email"),c.Rb(),c.Nb(9,"input",5),c.xc(10,f,2,0,"mat-error",6),c.Rb(),c.Sb(11,"mat-form-field",7),c.Sb(12,"mat-label"),c.zc(13,"Mot de passe"),c.Rb(),c.Nb(14,"input",8),c.Sb(15,"mat-icon",9),c.Zb("click",(function(){return t.hide=!t.hide})),c.zc(16),c.Rb(),c.Rb(),c.Sb(17,"button",10),c.zc(18,"Connexion"),c.Rb(),c.Sb(19,"div",11),c.Sb(20,"button",12),c.Zb("click",(function(){return t.myForm.get("email").patchValue("admin@angular.io")})),c.zc(21,"Admin"),c.Rb(),c.Sb(22,"button",13),c.Zb("click",(function(){return t.myForm.get("email").patchValue("user@angular.io")})),c.zc(23,"user"),c.Rb(),c.Rb(),c.Rb(),c.Rb(),c.Rb()),2&e&&(c.ic("formGroup",t.myForm),c.Bb(10),c.ic("ngIf",t.myForm.get("email").invalid),c.Bb(4),c.ic("type",t.hide?"password":"text"),c.Bb(2),c.Bc("",t.hide?"visibility_off":"visibility"," "),c.Bb(1),c.ic("disabled",t.myForm.invalid))},directives:[s.s,s.n,s.h,b.c,b.f,u.b,s.c,s.m,s.g,i.k,h.a,b.g,p.a,b.b],styles:["h1[_ngcontent-%COMP%]{color:#e85412}"]}),e})();var w=r("Wp6s");function y(e,t){1&e&&(c.Sb(0,"mat-error"),c.zc(1,"Email non valide"),c.Rb())}function k(e,t){if(1&e&&(c.Sb(0,"mat-error"),c.zc(1),c.Rb()),2&e){const e=c.dc();c.Bb(1),c.Ac(e.passwordError)}}function v(e,t){if(1&e&&(c.Sb(0,"mat-error"),c.zc(1),c.Rb()),2&e){const e=c.dc();c.Bb(1),c.Ac(e.checkPasswordError)}}const S=function(){return["/auth/login"]};let R=(()=>{class e{constructor(e,t,r,i,o){this.fb=e,this.uow=t,this.router=r,this.session=i,this.snackBar=o,this.o=new n.a,this.hide=!0,this.hide2=!0,this.checkPassword=new s.e("",[s.r.required])}ngOnInit(){return Object(a.a)(this,void 0,void 0,(function*(){this.createForm()}))}createForm(){this.myForm=this.fb.group({id:[this.o.id,[s.r.required]],name:[this.o.name,[s.r.required]],email:[this.o.email,[s.r.required,s.r.email]],password:[this.o.password,[s.r.required]],isActive:[this.o.isActive,[s.r.required]],date:[this.o.date,[s.r.required]],role:[this.o.role,[s.r.required]],imageUrl:[this.o.imageUrl]})}get email(){return this.myForm.get("email")}get password(){return this.myForm.get("password")}get emailError(){return this.email.hasError("required")?"You must enter a value":this.email.hasError("email")?"Not a valid email":""}get passwordError(){return this.password.hasError("required")?"You must enter a value":""}get checkPasswordError(){return this.checkPassword.hasError("required")?"You must enter a value":this.checkPassword.value!==this.password.value?"les mot de pass sont pas les m\xeame":""}submit(e){this.uow.accounts.create("auth/login".replace(/\//g,"%2F"),e).subscribe(e=>{e.code<0?this.snackBar.notifyAlert(400,e.message):(this.snackBar.notifyOk(200,"Lien d'activation a \xe9t\xe9 envoyer a votre email"),this.router.navigate(["/auth"]))})}resetForm(){this.o=new n.a,this.createForm()}}return e.\u0275fac=function(t){return new(t||e)(c.Mb(s.d),c.Mb(m.a),c.Mb(o.e),c.Mb(l.a),c.Mb(d.a))},e.\u0275cmp=c.Gb({type:e,selectors:[["app-create"]],decls:33,vars:12,consts:[[3,"formGroup","ngSubmit"],[1,"d-flex","flex-column","justify-content-center","align-items-center"],["src","assets/logo.png","alt","logo","width","100%",1,"mb-4","mt-3"],[1,""],["appearance","fill",1,"col-md-12","p-0"],["matInput","","formControlName","name"],["matInput","","formControlName","email","placeholder","Email address"],[4,"ngIf"],["matInput","","formControlName","password","placeholder","Mot de passe",3,"type"],["matSuffix","",3,"click"],["appearance","fill",1,"col-md-12","p-0","mb-4"],["matInput","","placeholder","R\xe9p\xe9ter le mot de pass",3,"formControl","type"],["mat-raised-button","","color","accent","type","submit",1,"col-md-12","mb-2",3,"disabled"],["mat-raised-button","","color","primary","type","button",1,"col-md-12",3,"routerLink"]],template:function(e,t){1&e&&(c.Sb(0,"form",0),c.Zb("ngSubmit",(function(){return t.submit(t.myForm.value)})),c.Sb(1,"mat-card-content",1),c.Nb(2,"img",2),c.Sb(3,"h1"),c.zc(4,"Bienvenue"),c.Rb(),c.Sb(5,"div",3),c.Sb(6,"mat-form-field",4),c.Sb(7,"mat-label"),c.zc(8,"name"),c.Rb(),c.Nb(9,"input",5),c.Rb(),c.Sb(10,"mat-form-field",4),c.Sb(11,"mat-label"),c.zc(12,"Email"),c.Rb(),c.Nb(13,"input",6),c.xc(14,y,2,0,"mat-error",7),c.Rb(),c.Sb(15,"mat-form-field",4),c.Sb(16,"mat-label"),c.zc(17,"Mot de passe"),c.Rb(),c.Nb(18,"input",8),c.Sb(19,"mat-icon",9),c.Zb("click",(function(){return t.hide=!t.hide})),c.zc(20),c.Rb(),c.xc(21,k,2,1,"mat-error",7),c.Rb(),c.Sb(22,"mat-form-field",10),c.Sb(23,"mat-label"),c.zc(24,"R\xe9p\xe9ter le mot de pass"),c.Rb(),c.Nb(25,"input",11),c.Sb(26,"mat-icon",9),c.Zb("click",(function(){return t.hide2=!t.hide2})),c.zc(27),c.Rb(),c.xc(28,v,2,1,"mat-error",7),c.Rb(),c.Sb(29,"button",12),c.zc(30,"Inscription"),c.Rb(),c.Sb(31,"button",13),c.zc(32," Connexion"),c.Rb(),c.Rb(),c.Rb(),c.Rb()),2&e&&(c.ic("formGroup",t.myForm),c.Bb(14),c.ic("ngIf",t.emailError),c.Bb(4),c.ic("type",t.hide?"password":"text"),c.Bb(2),c.Bc("",t.hide?"visibility_off":"visibility"," "),c.Bb(1),c.ic("ngIf",t.passwordError),c.Bb(4),c.ic("formControl",t.checkPassword)("type",t.hide2?"password":"text"),c.Bb(2),c.Bc("",t.hide2?"visibility_off":"visibility"," "),c.Bb(1),c.ic("ngIf",t.checkPassword.touched&&t.checkPasswordError),c.Bb(1),c.ic("disabled",t.myForm.invalid||""!==t.checkPasswordError),c.Bb(2),c.ic("routerLink",c.jc(11,S)))},directives:[s.s,s.n,s.h,w.b,b.c,b.f,u.b,s.c,s.m,s.g,i.k,h.a,b.g,s.f,p.a,o.f,b.b],styles:["h1[_ngcontent-%COMP%]{color:#e85412}"]}),e})(),E=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=c.Gb({type:e,selectors:[["app-auth"]],decls:3,vars:0,consts:[[1,"row","justify-content-center","align-items-center","m-0","pl-2","pr-2"],[1,"mat-elevation-z8","mywith"]],template:function(e,t){1&e&&(c.Sb(0,"div",0),c.Sb(1,"mat-card",1),c.Nb(2,"router-outlet"),c.Rb(),c.Rb())},directives:[w.a,o.i],styles:[".row[_ngcontent-%COMP%]{background-image:repeating-linear-gradient(90deg,hsla(0,0%,77.6%,.05),hsla(0,0%,77.6%,.05) 1px,transparent 0,transparent 5px),repeating-linear-gradient(0deg,hsla(0,0%,77.6%,.05),hsla(0,0%,77.6%,.05) 1px,transparent 0,transparent 5px),repeating-linear-gradient(0deg,hsla(0,0%,77.6%,.06),hsla(0,0%,77.6%,.06) 1px,transparent 0,transparent 15px),repeating-linear-gradient(90deg,hsla(0,0%,77.6%,.06),hsla(0,0%,77.6%,.06) 1px,transparent 0,transparent 15px),linear-gradient(90deg,#fff,#fff);background-size:cover;background-repeat:no-repeat;background-position:50%;height:100vh;width:100vw}@media screen and (min-width:600px){.mywith[_ngcontent-%COMP%]{width:25rem}}"]}),e})();function B(e,t){1&e&&(c.Sb(0,"mat-error"),c.zc(1,"Email non valide"),c.Rb())}function x(e,t){if(1&e&&(c.Sb(0,"mat-error"),c.zc(1),c.Rb()),2&e){const e=c.dc(2);c.Bb(1),c.Ac(e.passwordError)}}function F(e,t){if(1&e){const e=c.Tb();c.Sb(0,"mat-form-field",4),c.Sb(1,"mat-label"),c.zc(2,"Mot de passe"),c.Rb(),c.Nb(3,"input",13),c.Sb(4,"mat-icon",14),c.Zb("click",(function(){c.pc(e);const t=c.dc();return t.hide=!t.hide})),c.zc(5),c.Rb(),c.xc(6,x,2,1,"mat-error",6),c.Rb()}if(2&e){const e=c.dc();c.Bb(3),c.ic("type",e.hide?"password":"text"),c.Bb(2),c.Bc("",e.hide?"visibility_off":"visibility"," "),c.Bb(1),c.ic("ngIf",e.passwordError)}}function I(e,t){if(1&e&&(c.Sb(0,"mat-error"),c.zc(1),c.Rb()),2&e){const e=c.dc(2);c.Bb(1),c.Ac(e.checkPasswordError)}}function M(e,t){if(1&e){const e=c.Tb();c.Sb(0,"mat-form-field",15),c.Sb(1,"mat-label"),c.zc(2,"R\xe9p\xe9ter le mot de pass"),c.Rb(),c.Nb(3,"input",16),c.Sb(4,"mat-icon",14),c.Zb("click",(function(){c.pc(e);const t=c.dc();return t.hide2=!t.hide2})),c.zc(5),c.Rb(),c.xc(6,I,2,1,"mat-error",6),c.Rb()}if(2&e){const e=c.dc();c.Bb(3),c.ic("formControl",e.checkPassword)("type",e.hide2?"password":"text"),c.Bb(2),c.Bc("",e.hide2?"visibility_off":"visibility"," "),c.Bb(1),c.ic("ngIf",e.checkPassword.touched&&e.checkPasswordError)}}const z=function(){return["/auth/create"]},C=function(){return["/auth/login"]};let P=(()=>{class e{constructor(e,t,r,i,o,a){this.fb=e,this.uow=t,this.router=r,this.session=i,this.route=o,this.snackBar=a,this.o=new n.a,this.code="",this.hide=!0,this.hide2=!0,this.checkPassword=new s.e("",[s.r.required]),this.isEmailChecked=!1}ngOnInit(){if(this.code=this.route.snapshot.paramMap.get("code"),this.code){const e=atob(this.code).split("*"),[t,r,i]=e;this.o.email=t,this.isEmailChecked=!0}this.createForm()}createForm(){this.myForm=this.fb.group({email:[this.o.email,[s.r.required,s.r.email]],password:[this.o.password,this.isEmailChecked?[s.r.required]:[]]})}get email(){return this.myForm.get("email")}get password(){return this.myForm.get("password")}get emailError(){return this.email.hasError("required")?"You must enter a value":this.email.hasError("email")?"Not a valid email":""}get passwordError(){return this.password.hasError("required")?"You must enter a value":""}get checkPasswordError(){return this.checkPassword.hasError("required")?"You must enter a value":this.checkPassword.value!==this.password.value?"les mot de pass sont pas les m\xeame":""}sendEmailForResetPassword(e){return Object(a.a)(this,void 0,void 0,(function*(){this.uow.accounts.sendEmailForResetPassword(e,"auth%2Freset","fr").subscribe(e=>{-1===e.code?(console.log(e.message),this.snackBar.notifyAlert(400,e.message)):(console.log(e.message),this.snackBar.notifyOk(200,e.message),this.router.navigate(["/auth/login"]))},e=>{console.log(e.error)})}))}resetPassword(e){this.uow.accounts.resetPassword({email:this.o.email,password:e}).subscribe(e=>{-1===e.code?console.log("Email Incorrect"):1===e.code&&(console.log(e.message),this.router.navigate(["/auth/login"]))},e=>{console.log(e.error)})}}return e.\u0275fac=function(t){return new(t||e)(c.Mb(s.d),c.Mb(m.a),c.Mb(o.e),c.Mb(l.a),c.Mb(o.a),c.Mb(d.a))},e.\u0275cmp=c.Gb({type:e,selectors:[["app-reset"]],decls:20,vars:10,consts:[[3,"formGroup"],[1,"d-flex","flex-column","justify-content-center","align-items-center"],["src","assets/logo.png","alt","logo","width","100%",1,"mb-4","mt-3"],[1,""],["appearance","fill",1,"col-md-12","p-0"],["matInput","","formControlName","email","placeholder","Email address",3,"readonly"],[4,"ngIf"],["appearance","fill","class","col-md-12 p-0",4,"ngIf"],["appearance","fill","class","col-md-12 p-0 mb-4",4,"ngIf"],["mat-raised-button","","color","primary",1,"col-md-12","mb-2",3,"disabled","click"],["mat-raised-button","","color","accent","type","button",1,"col-md-12",3,"routerLink"],[1,"d-flex","flex-row-reverse","mt-2","mb-2","text-muted"],[2,"cursor","pointer",3,"routerLink"],["matInput","","formControlName","password","placeholder","Mot de passe",3,"type"],["matSuffix","",3,"click"],["appearance","fill",1,"col-md-12","p-0","mb-4"],["matInput","","placeholder","R\xe9p\xe9ter le mot de pass",3,"formControl","type"]],template:function(e,t){1&e&&(c.Sb(0,"form",0),c.Sb(1,"mat-card-content",1),c.Nb(2,"img",2),c.Sb(3,"h3"),c.zc(4,"VEUILLEZ SAISIR VOTRE ADRESSE EMAIL"),c.Rb(),c.Sb(5,"div",3),c.Sb(6,"mat-form-field",4),c.Sb(7,"mat-label"),c.zc(8,"Email"),c.Rb(),c.Nb(9,"input",5),c.xc(10,B,2,0,"mat-error",6),c.Rb(),c.xc(11,F,7,3,"mat-form-field",7),c.xc(12,M,7,4,"mat-form-field",8),c.Sb(13,"button",9),c.Zb("click",(function(){return t.isEmailChecked?t.resetPassword(t.checkPassword.value):t.sendEmailForResetPassword(t.email.value)})),c.zc(14," R\xe9initialiser "),c.Rb(),c.Sb(15,"button",10),c.zc(16," Inscription "),c.Rb(),c.Sb(17,"div",11),c.Sb(18,"span",12),c.zc(19,"Connexion ?"),c.Rb(),c.Rb(),c.Rb(),c.Rb(),c.Rb()),2&e&&(c.ic("formGroup",t.myForm),c.Bb(9),c.ic("readonly",t.isEmailChecked),c.Bb(1),c.ic("ngIf",t.emailError),c.Bb(1),c.ic("ngIf",t.isEmailChecked),c.Bb(1),c.ic("ngIf",t.isEmailChecked),c.Bb(1),c.ic("disabled",t.myForm.invalid||t.isEmailChecked&&""!==t.checkPasswordError),c.Bb(2),c.ic("routerLink",c.jc(8,z)),c.Bb(3),c.ic("routerLink",c.jc(9,C)))},directives:[s.s,s.n,s.h,w.b,b.c,b.f,u.b,s.c,s.m,s.g,i.k,p.a,o.f,b.b,h.a,b.g,s.f],styles:["h3[_ngcontent-%COMP%]{color:#e85412}"]}),e})();const N=[{path:"",redirectTo:"",pathMatch:"full"},{path:"",component:E,children:[{path:"",redirectTo:"login",pathMatch:"full"},{path:"login/:code",component:g},{path:"login",component:g},{path:"create",component:R},{path:"reset/:code",component:P},{path:"reset",component:P}]}];let q=(()=>{class e{}return e.\u0275mod=c.Kb({type:e}),e.\u0275inj=c.Jb({factory:function(t){return new(t||e)},imports:[[o.h.forChild(N)],o.h]}),e})();var O=r("tk/3"),A=r("2thQ");let j=(()=>{class e{}return e.\u0275mod=c.Kb({type:e}),e.\u0275inj=c.Jb({factory:function(t){return new(t||e)},imports:[[i.c,q,s.i,s.p,O.c,A.a]]}),e})()}}]);